import{X as c,S as e,I as s}from"./Bl2ueRB0.js";const n="http://192.168.1.177/conciencia-api/public/api/meditator",d=c("auth",{state:()=>({token:null}),actions:{async login(t){try{e.fire({title:"Iniciando Sesión...",text:"Por favor espera...",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{e.showLoading()}});const o=new URLSearchParams;o.append("user",t.user),o.append("pass",t.password);const{data:a,error:r}=await s(n+"/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o},"$xdVm5bb03l");if(e.close(),r.value){e.fire({icon:"error",title:"Oops...",html:`
          <h3>Ocurrió un error al iniciar sesión:</h3>
            <br>
            <h5 style='color:red;'>
            ${r.value.message}</h5>`});return}a.value&&(this.token=a.value.token,localStorage.setItem("token",this.token),e.fire({title:"Bienvenido!",icon:"success",text:"Inicio de sesión exitoso!"}))}catch(o){e.fire({icon:"error",title:"Oops...",html:`
          <h3>Ocurrió un error al iniciar sesión:</h3>
            <br>
            <h5 style='color:red;'>${o.message}</h5>`})}},async register(t,o){try{e.fire({title:"Registrando Usuario...",text:"Por favor espera mientras procesamos tu solicitud.",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{e.showLoading()}});const a=new FormData;a.append("pass",t.password),a.append("name",t.name),a.append("email",t.email),a.append("phone",t.phone),o&&a.append("photo",o),a.append("city",t.city),a.append("state",t.state),a.append("birthdate",t.birthdate);const{data:r,error:i}=await s(n+"/register",{method:"POST",body:a,headers:{Accept:"application/json"}},"$TMADV5jPpK");if(e.close(),i.value){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al registrar:</h3>
              <br><h5 style='color: red;'>${JSON.stringify(i.value.data.message)}</h5>`});return}r.value&&(this.token=r.value.token,localStorage.setItem("token",r.value.token),e.fire({title:"Registro Exitoso!",icon:"success",text:"Tu cuenta ha sido creada correctamente."}))}catch(a){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al registrar:</h3>
              <br><h5 style='color: red;'>${a.message}</h5>`})}},async update(t,o){try{e.fire({title:"Actualizando Datos...",text:"Por favor espera mientras procesamos tu solicitud.",allowOutsideClick:!1,showConfirmButton:!1,didOpen:async()=>{e.showLoading()}});const a=JSON.stringify({name:t.name,email:t.email,phone:t.phone,birthdate:t.birthdate}),{data:r,error:i}=await s(n+"/update",{method:"PUT",body:a,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`${o}`}},"$erL35d3AW1");if(e.close(),i.value){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al actualizar la información:</h3>
              <br><h5 style='color: red;'>${JSON.stringify(i.value.data.message)}</h5>`});return}r.value&&e.fire({title:"Actualización Exitosa!",icon:"success",text:"Tu cuenta ha sido actualizada correctamente."})}catch(a){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al actualizar la información:</h3>
              <br><h5 style='color: red;'>${a.message}</h5>`})}},async updatePhoto(t,o){try{e.fire({title:"Actualizando Foto...",text:"Por favor espera mientras procesamos tu solicitud.",allowOutsideClick:!1,showConfirmButton:!1,didOpen:async()=>{e.showLoading()}});const a=new FormData;a.append("photo",t);const{data:r,error:i}=await s(n+"/updatePhoto",{method:"POST",body:a,headers:{Accept:"application/json",Authorization:`${o}`}},"$pTnagfueSC");if(e.close(),i.value){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al actualizar la foto:</h3>
              <br><h5 style='color: red;'>${JSON.stringify(i.value.data.message)}</h5>`});return}r.value&&e.fire({title:"Actualización Exitosa!",icon:"success",text:"Tu foto ha sido actualizada correctamente."})}catch(a){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al actualizar la foto:</h3>
              <br><h5 style='color: red;'>${a.message}</h5>`})}},async updatePsw(t,o,a){try{e.fire({title:"Actualizando Contraseña...",text:"Por favor espera mientras procesamos tu solicitud.",allowOutsideClick:!1,showConfirmButton:!1,didOpen:async()=>{e.showLoading()}});const r=new FormData;r.append("pass",o),r.append("old_pass",t.password);const{data:i,error:l}=await s(n+"/changePsw",{method:"POST",body:r,headers:{Accept:"application/json",Authorization:`${a}`}},"$6lPGJbgdMZ");if(e.close(),l.value){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al actualizar la contraseña:</h3>
              <br><h5 style='color: red;'>${JSON.stringify(l.value.data.message)}</h5>`});return}i.value&&e.fire({title:"Actualización Exitosa!",icon:"success",text:"Tu contraseña ha sido actualizada correctamente."})}catch(r){e.fire({icon:"error",title:"Oops...",html:`<h3>Error al actualizar la contraseña:</h3>
              <br><h5 style='color: red;'>${r.message}</h5>`})}},logout(){this.token=null,localStorage.removeItem("token")}}});export{d as u};
