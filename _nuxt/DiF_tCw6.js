import{m as x,T as j,ad as O,ae as H,V as f,a1 as _,r as T,af as K,a0 as S,g as L,ag as N,ah as C,ai as h,aj as b,ak as I,al as B,am as F,an as w,U as E,F as V,ao as q,ap as U}from"./DMN4r0H2.js";const z=x({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const i=e.renderKey,a=e.route,r={};for(const t in e.route)Object.defineProperty(r,t,{get:()=>i===e.renderKey?e.route[t]:a[t],enumerable:!0});return j(H,O(r)),()=>f(e.vnode,{ref:e.vnodeRef})}}),Q=x({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:i,slots:a,expose:r}){const t=_(),o=T(),d=K(H,null);let s;r({pageRef:o});const u=K(C,null);let l;const g=t.deferHydration();if(t.isHydrating){const n=t.hooks.hookOnce("app:error",g);S().beforeEach(n)}e.pageKey&&L(()=>e.pageKey,(n,m)=>{n!==m&&t.callHook("page:loading:start")});let y=!1;return()=>f(N,{name:e.name,route:e.route,...i},{default:n=>{const m=G(d,n.route,n.Component),p=d&&d.matched.length===n.route.matched.length;if(!n.Component){if(l&&!p)return l;g();return}if(l&&u&&!u.isCurrent(n.route))return l;if(m&&d&&(!u||u!=null&&u.isCurrent(d)))return p?l:null;const c=h(n,e.pageKey);!t.isHydrating&&!J(d,n.route,n.Component)&&s===c&&(t.callHook("page:loading:end"),y=!0),s=c;const v=!!(e.transition??n.route.meta.pageTransition??b),A=v&&D([e.transition,n.route.meta.pageTransition,b,{onAfterLeave:()=>{t.callHook("page:transition:finish",n.Component)}}].filter(Boolean)),k=e.keepalive??n.route.meta.keepalive??I;return l=B(v&&A,F(k,f(w,{suspensible:!0,onPending:()=>t.callHook("page:start",n.Component),onResolve:()=>{E(()=>t.callHook("page:finish",n.Component).then(()=>{if(!y)return t.callHook("page:loading:end");y=!1}).finally(g))}},{default:()=>{const R=f(z,{key:c||void 0,vnode:a.default?f(V,void 0,a.default(n)):n.Component,route:n.route,renderKey:c||void 0,trackRootNodes:v,vnodeRef:o});return k&&(R.type.name=n.Component.type.name||n.Component.type.__name||"RouteProvider"),R}}))).default(),l}})}});function D(e){const i=e.map(a=>({...a,onAfterLeave:a.onAfterLeave?q(a.onAfterLeave):void 0}));return U(...i)}function G(e,i,a){if(!e)return!1;const r=i.matched.findIndex(t=>{var o;return((o=t.components)==null?void 0:o.default)===(a==null?void 0:a.type)});return!r||r===-1?!1:i.matched.slice(0,r).some((t,o)=>{var d,s,u;return((d=t.components)==null?void 0:d.default)!==((u=(s=e.matched[o])==null?void 0:s.components)==null?void 0:u.default)})||a&&h({route:i,Component:a})!==h({route:e,Component:a})}function J(e,i,a){return e?i.matched.findIndex(t=>{var o;return((o=t.components)==null?void 0:o.default)===(a==null?void 0:a.type)})<i.matched.length-1:!1}export{Q as _};
