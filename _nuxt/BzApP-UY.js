import{m as x,O,ab as _,ac as H,B as f,_ as j,r as S,ad as b,Z as T,g as L,ae as N,af as B,ag as h,ah as K,ai as C,aj as I,ak as F,al as w,P as E,F as q,am as V,an as Z,ao as z}from"./Bl2ueRB0.js";const D=x({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const i=e.renderKey,a=e.route,r={};for(const t in e.route)Object.defineProperty(r,t,{get:()=>i===e.renderKey?e.route[t]:a[t],enumerable:!0});return O(H,_(r)),()=>f(e.vnode,{ref:e.vnodeRef})}}),U=x({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:i,slots:a,expose:r}){const t=j(),o=S(),d=b(H,null);let s;r({pageRef:o});const u=b(B,null);let l;const g=t.deferHydration();if(t.isHydrating){const n=t.hooks.hookOnce("app:error",g);T().beforeEach(n)}e.pageKey&&L(()=>e.pageKey,(n,m)=>{n!==m&&t.callHook("page:loading:start")});let y=!1;return()=>f(N,{name:e.name,route:e.route,...i},{default:n=>{const m=J(d,n.route,n.Component),k=d&&d.matched.length===n.route.matched.length;if(!n.Component){if(l&&!k)return l;g();return}if(l&&u&&!u.isCurrent(n.route))return l;if(m&&d&&(!u||u!=null&&u.isCurrent(d)))return k?l:null;const c=h(n,e.pageKey);!t.isHydrating&&!M(d,n.route,n.Component)&&s===c&&(t.callHook("page:loading:end"),y=!0),s=c;const v=!!(e.transition??n.route.meta.pageTransition??K),A=v&&G([e.transition,n.route.meta.pageTransition,K,{onAfterLeave:()=>{t.callHook("page:transition:finish",n.Component)}}].filter(Boolean)),p=e.keepalive??n.route.meta.keepalive??C;return l=I(V,v&&A,F(p,f(w,{suspensible:!0,onPending:()=>t.callHook("page:start",n.Component),onResolve:()=>{E(()=>t.callHook("page:finish",n.Component).then(()=>{if(!y)return t.callHook("page:loading:end");y=!1}).finally(g))}},{default:()=>{const R=f(D,{key:c||void 0,vnode:a.default?f(q,void 0,a.default(n)):n.Component,route:n.route,renderKey:c||void 0,trackRootNodes:v,vnodeRef:o});return p&&(R.type.name=n.Component.type.name||n.Component.type.__name||"RouteProvider"),R}}))).default(),l}})}});function G(e){const i=e.map(a=>({...a,onAfterLeave:a.onAfterLeave?Z(a.onAfterLeave):void 0}));return z(...i)}function J(e,i,a){if(!e)return!1;const r=i.matched.findIndex(t=>{var o;return((o=t.components)==null?void 0:o.default)===(a==null?void 0:a.type)});return!r||r===-1?!1:i.matched.slice(0,r).some((t,o)=>{var d,s,u;return((d=t.components)==null?void 0:d.default)!==((u=(s=e.matched[o])==null?void 0:s.components)==null?void 0:u.default)})||a&&h({route:i,Component:a})!==h({route:e,Component:a})}function M(e,i,a){return e?i.matched.findIndex(t=>{var o;return((o=t.components)==null?void 0:o.default)===(a==null?void 0:a.type)})<i.matched.length-1:!1}export{U as _};
