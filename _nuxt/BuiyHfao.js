import{m as j,u as A,r as l,n as O,g as L,p as G,q as U,o as d,c,a as t,s as g,v as h,x as a,y as W,z as M,A as P,t as z,B as m,F as J,S as u,C as K,D as Q,d as X,b as Y}from"./DMN4r0H2.js";import{h as B,v as E}from"./jtEgsSNN.js";import{u as Z,a as ee}from"./BwrzOgeg.js";import{_ as F}from"./DlAUqK2U.js";import{_ as te}from"./BPFZBWCM.js";const ae={class:"seccion_ajustes"},oe={class:"seccion_ajustes"},se={class:"seccion_ajustes"},ne={class:"container_input"},le={class:"seccion_ajustes"},ie={class:"seccion_ajustes"},re=["type"],ue=["src"],de={class:"seccion_ajustes"},ce=["type"],me=["src"],pe={class:"seccion_ajustes"},ve={class:"container_imagen"},fe={id:"container_buttos_file"},ge={key:0,id:"previewImg"},_e=["src"],Ce=j({__name:"ModalSettings",setup(q){const{toogleStateModal:_,isActiveModal:p}=Z(),{meditator:o}=A(),C=l(!1),r=l(!1),x=()=>{C.value=!C.value},y=()=>{r.value=!r.value},v=O({get(){return o.value.phone.slice(2)},set(s){o.value.phone=o.value.phone.slice(0,2)+s}}),f=l(""),i=l(null),b=l(null),w=l(null),k=l(""),I=l(!1);L(k,(s,e)=>{I.value=!I.value});const T=s=>{const e=s.target;if(e.files&&e.files[0]){const n=e.files[0];b.value=n,k.value=n.name;const S=new FileReader;S.onload=()=>{i.value=S.result},S.readAsDataURL(n)}},D=async()=>{if(b.value)try{u.fire({icon:"warning",title:"Confirmar cambios",text:"¿Estás seguro de que deseas guardar los cambios realizados?",showCancelButton:!0,confirmButtonText:"Continuar"}).then(async s=>{if(s.isConfirmed){const e=localStorage.getItem("token")||"";b.value&&await V.updatePhoto(b.value,e)}else u.fire("Operación cancelada","","info")})}catch{u.fire("Error","No se pudo guardar la imagen","error")}},H=()=>{i.value=null,b.value=null,w.value&&(w.value.value="",k.value="Seleccionar archivo")},N=()=>{var s;(s=w.value)==null||s.click()},V=G(),R=async()=>{try{u.fire({icon:"warning",title:"Confirmar cambios",text:"¿Estás seguro de que deseas guardar los cambios realizados?",showCancelButton:!0,confirmButtonText:"Continuar"}).then(async s=>{if(s.isConfirmed){const e=localStorage.getItem("token")||"";await V.update(o.value,e)}else u.fire("Operación concelada.","","info")})}catch{u.fire("Error","No se pudo actualizar la información.","error")}},$=async()=>{try{u.fire({icon:"warning",title:"Confirmar cambios",text:"¿Estás seguro de que deseas guardar los cambios realizados a la contraseña?",showCancelButton:!0,confirmButtonText:"Continuar"}).then(async s=>{if(s.isConfirmed){const e=localStorage.getItem("token")||"";await V.updatePsw(o.value,f.value,e)}else u.fire("Operación cancelada.","","info")})}catch{u.fire("Error","No se pudo guardar la contraseña.","error")}};return U(()=>{o.value.photo&&(i.value=o.value.photo)}),(s,e)=>(d(),c(J,null,[t("div",{class:P(["container_modal",{active:a(p)}])},[t("article",null,[e[17]||(e[17]=t("h3",null,"Mi Cuenta:",-1)),t("div",ae,[e[7]||(e[7]=t("label",{for:""},"Nombre",-1)),g(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a(o).name=n)},null,512),[[h,a(o).name]])]),t("div",oe,[e[8]||(e[8]=t("label",{for:""},"Correo Electrónico",-1)),g(t("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=n=>a(o).email=n)},null,512),[[h,a(o).email]])]),t("div",se,[e[9]||(e[9]=t("label",{for:""},"Teléfono",-1)),g(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>W(v)?v.value=n:null)},null,512),[[h,a(v)]])]),t("div",ne,[g(t("input",{type:"date",id:"date",placeholder:"","onUpdate:modelValue":e[3]||(e[3]=n=>a(o).birthdate=n)},null,512),[[h,a(o).birthdate]]),e[10]||(e[10]=t("label",{for:"date"}," Fecha de Nacimiento ",-1))]),t("div",{class:"seccion_ajustes"},[t("button",{onClick:R},"Guardar Cambios")]),t("details",le,[e[13]||(e[13]=t("summary",null,"Cambiar Contraseña",-1)),t("div",ie,[e[11]||(e[11]=t("label",{for:""},"Contraseña Actual",-1)),g(t("input",{type:C.value?"text":"password",placeholder:"Coloque la contraseña actual.","onUpdate:modelValue":e[4]||(e[4]=n=>a(o).password=n)},null,8,re),[[M,a(o).password]]),t("img",{src:C.value?a(B):a(E),alt:"icono",class:"icon_eye",onClick:x},null,8,ue)]),t("div",de,[e[12]||(e[12]=t("label",{for:""},"Nueva Contraseña",-1)),g(t("input",{type:r.value?"text":"password",placeholder:"Coloque una nueva contraseña.","onUpdate:modelValue":e[5]||(e[5]=n=>f.value=n)},null,8,ce),[[M,f.value]]),t("img",{src:r.value?a(B):a(E),alt:"icono",class:"icon_eye",onClick:y},null,8,me)]),t("button",{onClick:$},"Cambiar Contraseña")]),t("details",pe,[e[16]||(e[16]=t("summary",null,"Editar Imagen de perfil",-1)),t("div",ve,[t("div",fe,[e[14]||(e[14]=t("label",{for:""},"Imagen de Perfil",-1)),t("button",{onClick:N,id:"selector_archivo",class:P({loaded:I.value})},z(k.value||"Seleccionar archivo"),3),t("input",{type:"file",accept:"image/*",onChange:T,ref_key:"fileInput",ref:w,style:{display:"none"}},null,544),i.value?(d(),c("button",{key:0,onClick:N,id:"cambiar"}," Cambiar archivo ")):m("",!0),i.value!==a(o).photo?(d(),c("button",{key:1,onClick:H,id:"eliminar"}," Cancelar ")):m("",!0),i.value!==a(o).photo?(d(),c("button",{key:2,onClick:D,id:"cargar"}," Cargar ")):m("",!0)]),i.value?(d(),c("div",ge,[e[15]||(e[15]=t("h5",null,"Vista Previa:",-1)),t("img",{src:i.value,alt:"Previsualización de la imagen"},null,8,_e)])):m("",!0)])])])],2),a(p)?(d(),c("div",{key:0,id:"cerrarModal",onClick:e[6]||(e[6]=(...n)=>a(_)&&a(_)(...n))})):m("",!0)],64))}}),be=F(Ce,[["__scopeId","data-v-bcb62b4c"]]),ye={class:"container_main_dashboard"},we={class:"info_user"},ke=["src"],he=j({__name:"index",setup(q){K({title:"Cuenta"}),Q();const{toggleStateHeader:_}=ee(),{meditator:p,hydrate:o}=A();return l(!1),l(!1),l(""),U(()=>{o()}),(C,r)=>{var y,v,f;const x=be;return d(),c("div",ye,[t("div",we,[t("h1",null,[X(" Hola "+z((y=a(p))==null?void 0:y.name)+"! ",1),t("span",{id:"mostrar_menu",onClick:r[0]||(r[0]=(...i)=>a(_)&&a(_)(...i)),style:{display:"none"}},"Mostrar")]),(v=a(p))!=null&&v.photo?(d(),c("img",{key:0,src:(f=a(p))==null?void 0:f.photo,alt:"",id:"botonMenu"},null,8,ke)):m("",!0),r[1]||(r[1]=t("img",{src:te,alt:"",id:"logo_conciencia"},null,-1))]),m("",!0),Y(x)])}}}),Me=F(he,[["__scopeId","data-v-b78b8e28"]]);export{Me as default};
